<?xml version="1.0" encoding="utf-8"?>
<Project  DefaultTargets="get_project" ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<Import Project=".\Environment\Environment.props"/>

<!-- Get VS Solution object and set Variables-->
<Target Name="get_solution">
    <PropertyGroup>
        <_solution_path>$(_clone_to_folder)\$(_gitlab_project)\Source</_solution_path>
        <_solution_file>$(_solution_path)\$(_gitlab_project).sln</_solution_file>
    </PropertyGroup>
    <ItemGroup>
        <_solution Include="$(_solution_file)"/> 
    </ItemGroup>
    <!--<Message Text="solution_item : @(_solution)"/>
    <Message Text="solution_path : $(_solution_path)"/>
    <Message Text="solution_file : $(_solution_file)"/>-->
</Target>

<!-- Get VS Project object as set Variables -->
<Target Name="get_project" DependsOnTargets="get_solution" Condition="Exists('$(_CI_folder)')">
    <PropertyGroup>
        <_project_path>$(_solution_path)\%(_solution.Filename)</_project_path>
        <_project_file>$(_project_path)\%(_solution.Filename).sqlproj</_project_file>
    </PropertyGroup>
    <ItemGroup>
        <_project Include="$(_project_file)"/>
    </ItemGroup>
    <!--<Message Text="project_file : @(_project)"/>
    <Message Text="project_path : $(_project_path)"/>
    <Message Text="project_file : $(_project_file)"/>-->
</Target>

</Project>